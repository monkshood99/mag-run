'use strict';// xEditable DateTime
(function($){'use strict';var EditableDateTime=function EditableDateTime(options){this.init('date_time',options,EditableDateTime.defaults)};$.fn.editableutils.inherit(EditableDateTime,$.fn.editabletypes.abstractinput);$.extend(EditableDateTime.prototype,{render:function render(){var $container=this.$input;var $date=$container.find('input[name=date]');var $time_hours_field=$container.find('select[name=time_hours]');var $time_minutes_field=$container.find('select[name=time_minutes]');var $time_seconds_field=$container.find('select[name=time_seconds]');jQuery('body').addClass('ac-jqui');$date.datepicker({dateFormat:'yy-mm-dd',changeYear:true,firstDay:this.options.weekstart,onSelect:function onSelect(){$time_hours_field.focus()}});for(var i=0;i<24;i++){var $option=$('<option>');var val=('0'+i).slice(-2);var label=12===this.options.timeformat?this.formatAMPM(i):val;$option.val(val).text(label);$time_hours_field.append($option)}$time_hours_field.find('option:first').prop('selected',true);for(var _i=0;_i<60;_i++){var _$option=$('<option>');var _val=('0'+_i).slice(-2);_$option.val(_val).text(_val);$time_minutes_field.append(_$option.clone());$time_seconds_field.append(_$option)}$time_minutes_field.val('00');$time_seconds_field.val('00')},formatAMPM:function formatAMPM(hours){var ampm=hours>=12?'pm':'am';hours=hours%12;hours=hours?hours:12;// the hour '0' should be '12'
return hours+' '+ampm},value2input:function value2input(value){if(!value){return}var $container=this.$input;var $date=$container.find('input[name=date]');var $time_hours_field=$container.find('select[name=time_hours]');var date=value.substr(0,10);var hours=value.substr(11,2);var minutes=value.substr(14,2);var seconds=value.substr(17,2);$date.val(date).datepicker('refresh');$time_hours_field.val(hours);$container.find('select[name=time_minutes]').val(minutes);$container.find('select[name=time_secondshours]').val(seconds)},input2value:function input2value(){jQuery('body').removeClass('ac-jqui');var date=$('#frm_date').val();var hours=$('#frm_time_hours').val();var minutes=$('#frm_time_minutes').val();var seconds=$('#frm_time_seconds').val();if(!date||!hours||!minutes||!seconds){return false}return date+' '+hours+':'+minutes+':'+seconds}});var template='\n\t<div class="acf-editable-date-time">\n\t\t<div class="acf-editable-date-time__date">\n\t\t\t<label>'+ACP_Editing.i18n.date+'</label>\n\t\t\t<input type="text" id="frm_date" name="date" placeholder="yyyy-mm-dd" required class="form-control" autocomplete="off">\n\t\t</div>\n\t\t<div class="acf-editable-date-time__time">\n\t\t\t<label>'+ACP_Editing.i18n.time+'</label>\n\t\t\t<select type="text" id="frm_time_hours" name="time_hours"></select>\n\t\t\t<select type="text" id="frm_time_minutes" name="time_minutes"></select>\n\t\t\t<select type="text" id="frm_time_seconds" name="time_seconds"></select>\n\t\t</div>\n\t</div>';EditableDateTime.defaults=$.extend({},$.fn.editabletypes.abstractinput.defaults,{tpl:template,weekstart:0,timeformat:12});$.fn.editabletypes.date_time=EditableDateTime})(window.jQuery);jQuery.fn.cacie_edit_date_time=function(column,item){var el=jQuery(this);el.cacie_xeditable({type:'date_time',value:el.cacie_get_value(column,item),weekstart:column.editable.weekstart,timeformat:column.editable.timeformat},column,item)};