'use strict';// xEditable DateTime
(function($){'use strict';var EditableAcDate=function EditableAcDate(options){this.init('ac_date',options,EditableAcDate.defaults)};$.fn.editableutils.inherit(EditableAcDate,$.fn.editabletypes.abstractinput);$.extend(EditableAcDate.prototype,{value2input:function value2input(value){if(!value){return}var $container=this.$input;var $date=$container.find('input[name=date]');var date=value.substr(0,10);jQuery('body').addClass('ac-jqui');$date.val(date).datepicker({dateFormat:'yy-mm-dd',changeYear:true,firstDay:this.options.weekstart,onSelect:function onSelect(){$container.parents('form:first').submit()}});setTimeout(function(){jQuery('#frm_date').datepicker('show')},100)},input2value:function input2value(){var $date=this.$input.find('input[name=date]');var new_date=new Date($date.val());return new_date.yyyymmdd()}});var template='\n\t<div class="acf-editable-date">\n\t\t<div class="acf-editable-date-time__date">\n\t\t\t<input type="text" id="frm_date" name="date" placeholder="yyyy-mm-dd" required class="form-control" autocomplete="off">\n\t\t</div>\n\t</div>';EditableAcDate.defaults=$.extend({},$.fn.editabletypes.abstractinput.defaults,{tpl:template,weekstart:0});$.fn.editabletypes.ac_date=EditableAcDate})(window.jQuery);jQuery.fn.cacie_edit_date=function(column,item){var el=jQuery(this);var value=el.cacie_get_value(column,item);// convert yyyymmdd to yyyy-mm-dd
if(value){value=[value.slice(0,4),'-',value.slice(4)].join('');value=[value.slice(0,7),'-',value.slice(7)].join('')}el.cacie_xeditable({showbuttons:false,type:'ac_date',value:value,weekstart:column.editable.weekstart,timeformat:column.editable.timeformat},column,item);// Convert date object to yyyyddmm format
// http://stackoverflow.com/questions/3066586/get-string-in-yyyymmdd-format-from-js-date-object
Date.prototype.yyyymmdd=function(){var yyyy=this.getFullYear().toString();var mm=(this.getMonth()+1).toString();// getMonth() is zero-based
var dd=this.getDate().toString();return yyyy+(mm[1]?mm:'0'+mm[0])+(dd[1]?dd:'0'+dd[0]);// padding
}};